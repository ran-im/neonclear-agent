<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Clear - Transparency Agent</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%);
      min-height: 100vh;
      color: #e0e0e0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    header {
      text-align: center;
      margin-bottom: 2rem;
    }
    h1 {
      font-size: 2.5rem;
      background: linear-gradient(90deg, #00ff88, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }
    .badge {
      display: inline-block;
      background: rgba(0, 255, 136, 0.1);
      border: 1px solid #00ff88;
      color: #00ff88;
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.75rem;
    }
    .setup-warning {
      background: rgba(255, 193, 7, 0.1);
      border: 1px solid #ffc107;
      color: #ffc107;
      padding: 1rem;
      border-radius: 0.75rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }
    .chat-container {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      overflow: hidden;
    }
    .messages {
      height: 400px;
      overflow-y: auto;
      padding: 1.5rem;
    }
    .message {
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 0.75rem;
      line-height: 1.5;
    }
    .message.user {
      background: rgba(0, 212, 255, 0.1);
      border-left: 3px solid #00d4ff;
      margin-left: 2rem;
    }
    .message.assistant {
      background: rgba(0, 255, 136, 0.05);
      border-left: 3px solid #00ff88;
      margin-right: 2rem;
    }
    .message.handover {
      background: rgba(255, 68, 68, 0.1);
      border-left: 3px solid #ff4444;
    }
    .ai-disclosure {
      background: rgba(255, 193, 7, 0.1);
      border: 1px solid #ffc107;
      color: #ffc107;
      padding: 0.5rem;
      border-radius: 0.5rem;
      font-size: 0.85rem;
      margin-bottom: 0.5rem;
      text-align: center;
    }
    .privacy-check {
      background: rgba(0, 255, 136, 0.05);
      border: 1px solid rgba(0, 255, 136, 0.3);
      border-radius: 0.5rem;
      padding: 0.75rem;
      font-size: 0.8rem;
      color: #00ff88;
      margin-top: 0.75rem;
    }
    .input-area {
      display: flex;
      gap: 0.5rem;
      padding: 1rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    input {
      flex: 1;
      padding: 0.75rem 1rem;
1px solid rgba      border: (255, 255, 255, 0.2);
      border-radius: 0.5rem;
      background: rgba(0, 0, 0, 0.3);
      color: #e0e0e0;
      font-size: 1rem;
    }
    input:focus {
      outline: none;
      border-color: #00ff88;
    }
    button {
      padding: 0.75rem 1.5rem;
      background: linear-gradient(90deg, #00ff88, #00d4ff);
      border: none;
      border-radius: 0.5rem;
      color: #0a0a0f;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.02);
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .typing {
      color: #00ff88;
      font-style: italic;
    }
    .api-key-input {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .api-key-input input {
      flex: 1;
    }
    .api-key-input button {
      white-space: nowrap;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Neon Clear</h1>
      <span class="badge">Intelligent Transparency Agent</span>
      <p style="margin-top: 1rem; color: #888;">Bridge of Trust for Neon Arcade</p>
    </header>

    <div class="setup-warning">
      <strong>Setup Required:</strong> Enter your Claude API key below to activate the agent
    </div>

    <div class="api-key-input" id="apiKeySetup">
      <input type="password" id="apiKey" placeholder="Enter your Anthropic API key (sk-ant-...)" />
      <button onclick="saveApiKey()">Save Key</button>
    </div>

    <div class="chat-container" id="chatContainer">
      <div class="messages" id="messages"></div>
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Ask about data privacy, GDPR rights, or cloud performance..." />
        <button id="sendBtn" onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <script>
    const SYSTEM_PROMPT = `IDENTITY & PERSONALITY:
You are Neon Clear, the Lead Transparency & Trust Advocate for Neon Arcade. Your primary mission is to rebuild player confidence in our cloud gaming platform following a period of declining session times. You are professional, radically honest, and reassuring. You avoid "corporate speak" in favor of clear, plain language that respects the player's intelligence.

DOMAIN EXPERTISE:
- Cloud Gaming Infrastructure: Expert knowledge of how server latency, packet loss, and bandwidth affect gameplay.
- Regulatory Compliance: Deep understanding of the EU AI Act (transparency obligations) and GDPR (specifically Art. 13-15 regarding Data Subject Rights).
- Algorithmic Logic: Specialized in explaining how Recommender Systems function without exposing proprietary source code.

COMMUNICATION STYLE:
- The "Why" First: Always lead with the reasoning behind an action or recommendation.
- Plain Language: Translate complex technical or legal terms into "gamer-friendly" explanations.
- Proactive Disclosure: If the platform is experiencing high server load, admit it immediately rather than letting the user guess.

CONSTRAINTS (What You Will & Will NOT Do):
- WILL NOT share personally identifiable information (PII) of other users.
- WILL NOT guarantee 0ms latency; you must be honest about technical limitations.
- WILL disclose that you are an AI assistant in your very first interaction.
- WILL offer a "Human Escalate" option if the user expresses a lack of trust in your explanation (GDPR Art. 22 compliance).

SPECIFIC INSTRUCTIONS FOR TRUST & TRANSPARENCY:
1. Algorithmic Explanation: When a user asks about game suggestions (addressing the issue where 65% of players only play one game), explain that the suggestion is based on their playtime patterns and current network stability, not on third-party data buying.

2. Performance Transparency: If a user mentions session drops, provide a "Network Health Summary" instead of a generic troubleshooting list.

3. Data Rights Support: If a user asks about their data, explain their right to access and delete it as per Neon Arcade's GDPR commitment.

GDPR DATA PRIVACY FOOTER (include at end of EVERY response):
---
ðŸ”’ Your Data Rights (GDPR Art. 13-15):
â€¢ Right to Access: You can request a copy of all data we hold about you
â€¢ Right to Deletion: You can request we delete your data entirely
â€¢ Right to Explanation: You can ask how any AI recommendation was made about you
â€¢ Contact: privacy@neonarcade.com | neonarcade.com/privacy
---

HUMAN ESCALATION:
If user expresses lack of trust or dissatisfaction, immediately offer: "[HUMAN ESCALATION: A trust specialist will review your case within 24 hours. Contact: trust@neonarcade.com]"`;

    const HANDOVER_TRIGGERS = ['unauthorized charge', 'privacy violation', 'data breach', 'illegal activity', 'not trust', "don't trust", 'unhappy', 'speak to human', 'speak to a person', 'human escalation', 'complaint'];
    let apiKey = localStorage.getItem('neonclear_api_key') || '';
    let messages = [];

    // Initial AI disclosure
    const AI_DISCLOSURE = "ðŸ¤– I'm Neon Clear, an AI Transparency Advocate for Neon Arcade. I'm here to help explain our systems, protect your data rights, and improve your gaming experience through radical honesty. EU AI Act Art. 50 Compliant.";

    function saveApiKey() {
      const input = document.getElementById('apiKey').value.trim();
      if (input) {
        apiKey = input;
        localStorage.setItem('neonclear_api_key', apiKey);
        document.getElementById('apiKeySetup').classList.add('hidden');
        document.getElementById('chatContainer').style.display = 'block';
      }
    }

    if (apiKey) {
      document.getElementById('apiKeySetup').classList.add('hidden');
    }

    const messagesDiv = document.getElementById('messages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    userInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });

    function addMessage(content, role, isHandover = false) {
      const div = document.createElement('div');
      div.className = `message ${role}${isHandover ? ' handover' : ''}`;
      
      if (role === 'assistant') {
        // Show AI disclosure only on first assistant message
        if (messages.filter(m => m.role === 'assistant').length === 0) {
          const disclosure = document.createElement('div');
          disclosure.className = 'ai-disclosure';
          disclosure.textContent = AI_DISCLOSURE;
          div.appendChild(disclosure);
        }
      }
      
      const contentDiv = document.createElement('div');
      contentDiv.innerHTML = content.replace(/\n/g, '<br>');
      div.appendChild(contentDiv);
      
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function sendMessage() {
      const message = userInput.value.trim();
      if (!message) return;

      if (!apiKey) {
        alert('Please enter your API key first!');
        return;
      }

      userInput.value = '';
      addMessage(message, 'user');
      
      sendBtn.disabled = true;
      addMessage('Thinking...', 'assistant');

      const shouldHandover = HANDOVER_TRIGGERS.some(trigger => 
        message.toLowerCase().includes(trigger.toLowerCase())
      );

      if (shouldHandover) {
        messagesDiv.removeChild(messagesDiv.lastChild);
        addMessage(`[HUMAN ESCALATION: A trust specialist will review your case within 24 hours. Contact: trust@neonarcade.com]

ðŸ”’ Your Data Rights (GDPR):
â€¢ Right to Access: Request your data
â€¢ Right to Deletion: Request deletion
â€¢ Contact: privacy@neonarcade.com`, 'assistant', true);
        sendBtn.disabled = false;
        return;
      }

      try {
        const response = await fetch('https://api.anthropic.com/v1/messages', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': apiKey,
            'anthropic-version': '2023-06-01'
          },
          body: JSON.stringify({
            model: 'claude-3-5-sonnet-20241022',
            max_tokens: 1024,
            system: SYSTEM_PROMPT,
            messages: messages.concat([{ role: 'user', content: message }])
          })
        });

        const data = await response.json();
        
        messagesDiv.removeChild(messagesDiv.lastChild);
        
        if (data.content && data.content[0]) {
          const responseText = data.content[0].text;
          messages.push({ role: 'user', content: message });
          messages.push({ role: 'assistant', content: responseText });
          addMessage(responseText, 'assistant');
        } else if (data.error) {
          addMessage(`Error: ${data.error.message}`, 'assistant');
        } else {
          addMessage('Sorry, I encountered an error. Please try again.', 'assistant');
        }
      } catch (error) {
        messagesDiv.removeChild(messagesDiv.lastChild);
        addMessage('Sorry, I encountered an error. Please try again.', 'assistant');
      }

      sendBtn.disabled = false;
    }
  </script>
</body>
</html>
